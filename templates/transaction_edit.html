{% extends "base.html" %}

{% block content %}
    <div class="container">
        <h2 class="my-4">Transaction Detail</h2>

        <form method="post" action="{% url 'edit_transaction' transaction.id %}" class="mb-4">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.transaction_type.id_for_label }}" class="font-weight-bold">Transaction Type:</label>
                {{ form.transaction_type }}
            </div>

            <div class="form-group">
                <label for="{{ form.category.id_for_label }}" class="font-weight-bold">Category:</label>
                {{ form.category }}
            </div>

            <div class="form-group">
                <label for="{{ form.amount.id_for_label }}" class="font-weight-bold">Amount:</label>
                {{ form.amount }}
            </div>

            <div class="form-group">
                <label for="{{ form.description.id_for_label }}" class="font-weight-bold">Description:</label>
                <div class="input-group">
                    {{ form.description }}
                </div>
            </div>

            <div class="form-group">
                <label for="{{ form.date.id_for_label }}" class="font-weight-bold">Date:</label>
                {{ form.date }}
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-primary mr-2">Save Changes</button>
                <a href="#" onclick="showConfirmationDialog({{ transaction.id }})" class="btn btn-danger">Delete Transaction</a>
            </div>
        </form>

        <p><a href="{% url 'transaction_list' %}" class="btn btn-secondary">Back to Transaction List</a></p>
    </div>

    <script>
        function showConfirmationDialog(transactionId) {
            var isConfirmed = confirm("Are you sure you want to delete this transaction?");

            if (isConfirmed) {
                window.location.href = "{% url 'delete_transaction' transaction_id=0 %}".replace('0', transactionId);
            }
        }
    </script>
{% endblock %}
